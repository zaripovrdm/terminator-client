<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	
	<entry key="query.client.rcas.merge">
		MERGE INTO ${db.rcas.schema}.CUSTOMER c 
		USING (
			SELECT TO_CHAR(:CNUM) AS CNUM FROM DUAL
		) t 
		ON (c.CUSTOMER_ID = t.CNUM)
		WHEN MATCHED THEN UPDATE SET
			BRANCH_ID = :BRANCH_ID,
			EMPLOYER_ID = :EMPLOYER_ID,
			CATEGORY_ID = :CATEGORY_ID,
			GIVEN_NAME = :FIRST_NAME,
			MIDDLE_NAME = :PATRONYMIC,
			LAST_NAME = :LAST_NAME,
			TRANSLIT_NAME = :TRANSLIT_NAME,
			BIRTH_DATE = :BIRTH_DATE,
			ADDRESS = :LEGAL_ADDRESS,
			INN = :INN,
			EMAIL = :EMAIL,
			MOBILE_PHONE = :MOBILE_PHONE,
			PASS_NUM = :PASSPORT_NUMBER,
			PASS_ISSUER = :PASSPORT_ISSUER,
			PASS_DATE = :PASSPORT_DATE,
			RESIDENT = :RESIDENT,
			LAST_MODIFIED = :LASTMODIFIED
		WHEN NOT MATCHED THEN INSERT (
			CUSTOMER_ID,
			BRANCH_ID,
			EMPLOYER_ID,
			CATEGORY_ID,
			GIVEN_NAME,
			MIDDLE_NAME,
			LAST_NAME,
			TRANSLIT_NAME,
			BIRTH_DATE,
			ADDRESS,
			INN,
			EMAIL,
			MOBILE_PHONE,
			PASS_NUM,
			PASS_SERIE,
			PASS_ISSUER,
			PASS_DATE,
			RESIDENT,
			LAST_MODIFIED
		) VALUES (
			:CNUM,
			:BRANCH_ID,
			:EMPLOYER_ID,
			:CATEGORY_ID,
			:FIRST_NAME,
			:PATRONYMIC,
			:LAST_NAME,
			:TRANSLIT_NAME,
			:BIRTH_DATE,
			:LEGAL_ADDRESS,
			:INN,
			:EMAIL,
			:MOBILE_PHONE,
			:PASSPORT_NUMBER,
			'XXX',
			:PASSPORT_ISSUER,
			:PASSPORT_DATE,
			:RESIDENT,
			:LASTMODIFIED
		)	
	</entry>
	
</properties>
